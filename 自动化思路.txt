# Azure 云资源自动化管理平台
## 项目概述
一个前后端分离的 Azure 云资源自动化管理平台，提供图形化界面用于监控、管理和优化 Azure 云资源，帮助用户降低成本、提高资源利用率并提升运维效率。

---

## 第一阶段：核心需求分析

### 1. 用户角色设计
- **管理员**：拥有所有功能权限，可配置系统参数、管理用户、查看所有资源
- **运维工程师**：可查看资源状态、执行运维操作、设置监控规则
- **成本分析师**：可查看费用分析、资源利用率报告
- **普通用户**：只读访问权限

### 2. 系统架构
- **前端**：React/Vue.js + Ant Design/Element UI + Chart.js/ECharts
- **后端**：Node.js/Express 或 Python/FastAPI
- **数据存储**：关系型数据库 (PostgreSQL) + 时序数据库 (InfluxDB) 用于性能数据
- **任务调度**：Node-cron 或 APScheduler
- **Azure API**：Azure SDK for JavaScript/Python

---

## 第二阶段：功能模块详细设计

### 1. 系统管理模块
- [ ] 用户管理：创建、编辑、删除用户账号
- [ ] 角色管理：基于角色的权限控制
- [ ] Azure 配置：管理 Azure Service Principal、订阅等
- [ ] 系统设置：时区、数据保留期等

### 2. 采集模块
- [x] 虚拟机性能指标采集（5分钟粒度）
  - CPU：avg, max
  - 内存：avg, max
  - 网络：入/出流量
- [x] 虚拟机属性采集
  - SKU规格、CPU核数、内存容量
  - 磁盘配置（类型、大小）
  - 操作系统、开机状态
- [x] 费用数据采集
  - 上月整月费用
  - 理论费用计算（基于标准定价）
- [x] Azure SKU 信息采集
  - East Asia 和 Southeast Asia 可用 SKU
- [x] 统计计算
  - 开机时长、开机率
  - 资源利用率平均值
  - 费用增长率对比

### 3. 定期系统调度
- [x] 任务调度器
- [x] 定时数据采集任务
- [x] 操作日志记录

### 4. 可视化模块
- [ ] 资源概览仪表板
- [ ] 性能指标趋势图
- [ ] 费用分析报表
- [ ] 资源利用率统计

### 5. 监控模块
- [ ] 自定义监控规则
- [ ] 阈值告警
- [ ] 告警通知（邮件、Webhook）
- [ ] 异常日志分析

### 6. 变更模块
- [ ] Azure 资源 CRUD 操作
- [ ] 资源变更审批流程
- [ ] 变更历史记录

### 7. 资产与费用分析
- [ ] 资源利用率分析
- [ ] 成本优化建议
- [ ] 预算管理
- [ ] 账单分析

---

## 第三阶段：分阶段实施计划

### 阶段 1 - MVP (最小可行产品)
**时间范围**：4周
**关键功能**：
- ✅ 系统管理（用户、角色、Azure配置）
- ✅ 核心数据采集
- ✅ 基础可视化
- ✅ 任务调度

### 阶段 2 - 高级功能
**时间范围**：4-6周
**关键功能**：
- 监控告警
- 资源变更
- 初步的成本优化建议

### 阶段 3 - 高级分析
**时间范围**：6-8周
**关键功能**：
- 全面的资产与费用分析
- 机器学习驱动的优化建议
- 多租户支持

---

## 第四阶段：扩展需求（待讨论）

### DevOps 集成
- CI/CD 管道
- 自动化部署

### AI 功能
- 资源使用预测
- 智能缩放建议

### 合规性
- 审计日志
- 安全合规检查

---

## 技术选型建议
- **前端**：React + Ant Design + ECharts
- **后端**：Node.js + Express 或 Python + FastAPI
- **数据库**：PostgreSQL (关系数据) + InfluxDB (时序数据)
- **部署**：Docker + Kubernetes 或 Azure App Service

---

## 关键考虑因素
- 数据安全性（敏感信息加密）
- API 调用限制（避免超出 Azure API 配额）
- 数据保留策略
- 用户体验（直观的图形界面）

---

## 更新记录
2025-05-30：初始需求文档
[添加后续更新日期]：[功能变更/新增]